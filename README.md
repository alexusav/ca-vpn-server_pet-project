# ca-vpn-server_pet-project
first pet project
—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–µ, 
–∫–∞–∫–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã/—É—Ç–∏–ª–∏—Ç—ã/–ø—Ä–æ–≥—Ä–∞–º–º—ã –Ω—É–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ, 
–∫–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –∏ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –≤–∞—à –ø—Ä–æ–µ–∫—Ç,
—Å–æ—Å—Ç–∞–≤ —Å–µ—Ä–≤–µ—Ä–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞, 
—Å—Ö–µ–º–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤/—Å–µ—Ä–≤–µ—Ä–æ–≤, 
–æ–ø–∏—Å–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –∏ –∏—Ö –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ, 
–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏.


## üìã –û –ø—Ä–æ–µ–∫—Ç–µ

–ü–µ—Ç-–ø—Ä–æ–µ–∫—Ç. –ù–µ–±–æ–ª—å—à–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –¥–æ—Å—Ç—É–ø–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –∫ —É–¥–∞–ª–µ–Ω–Ω—ã–º —Ä–µ—Å—É—Ä—Å–∞–º —Å –ø–æ–º–æ—â—å—é VPN. –û—Å–Ω–æ–≤–Ω–∞—è —Ü–µ–ª—å, –Ω–∞—É—á–∏—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑—Ç—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å —Ä–∞–∑–≤–æ—Ä–∞—Ü–∏–≤–∞–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–æ–≤, –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥.

## ‚ú® –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

–ü—Ä–æ–µ–∫—Ç —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ 3—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤.
- CA server. –°–µ—Ä–≤–µ—Ä —É–¥–æ—Å—Ç–æ–≤–µ—Ä—è—é—â–µ–≥–æ —Ü–µ–Ω—Ç—Ä–∞ –¥–ª—è –≤—ã–¥–∞—á–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º.
- VPN server. –î–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –∑–∞—â–∏—â–µ–Ω–Ω–æ–π —Å–µ—Ç–∏ –ø—Ä–µ–¥–ø—Ä–∏—è—Ç–∏—è.
- Monitoring server. –°–µ—Ä–≤–µ—Ä –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã.

–î–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞ –±—ã–ª–∞ –≤—ã–±—Ä–∞–Ω–∞ –æ–±–ª–∞—á–Ω–∞—è —Å—Ä–µ–¥–∞ –æ—Ç Yandex Cloud.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- –î–ª—è –∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º –∞–∫–∫–∞—É–Ω—Ç –≤ –æ–±–ª–∞—á–Ω–æ–º —Å–µ—Ä–≤–∏—Å–µ.
- –ù–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö –º–∞—à–∏–Ω–∞—Ö –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å ubuntu server.
- –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –æ–±–µ—Å–ø–µ—á–∏—Ç—å –≤—ã–¥–µ–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ IP –∞–¥—Ä–µ—Å–∞.

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

#### –î–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–∞ —Å –Ω–∞–∏–º–µ–Ω–Ω–µ–µ –∑–∞—Ç—Ä–∞—Ç–Ω—ã–º —Ç–∞—Ä–∏—Ñ–æ–º, –∏—Å–ø–æ–ª—å–∑—É—è CLI yandex cloud:

```bash
# –î–ª—è –∑–∞–ø—É—Å–∫–∞ –∏–∑ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ Windows
  yc compute instance create ^
  --name <instance-name> ^
  --network-interface subnet-id=<subnet id>,nat-ip-version=ipv4 ^
  --zone ru-central1-d ^
  --preemptible ^
  --platform standard-v3 ^
  --memory 2 ^
  --cores 2 ^
  --core-fraction 20 ^
  --create-boot-disk image-folder-id=standard-images,image-id=fd8vh7l8lcb182vm5vfd,size=20,type=network-hdd ^
  --hostname <instance-name> ^
  --ssh-key C:\Users\<username>\.ssh\id_ed25519.pub
```

#### –†–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞ —É–¥–æ—Å—Ç–æ–≤–µ—Ä—è—é—â–µ–≥–æ —Ü–µ–Ω—Ç—Ä–∞ CA server

- –î–ª—è –Ω–∞—á–∞–ª–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é –º–∞—à–∏–Ω—É, –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –Ω–µ–π –ø–æ SSH –∏—Å–ø–æ–ª—å–∑—É—è –∑–∞—Ä–∞–Ω–µ–µ –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω—ã–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç.
- –ü–µ—Ä–µ–¥–∞—Ç—å –Ω–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é –º–∞—à–∏–Ω—É —Å–∫—Ä–∏–ø—Ç first-config.sh –∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø–∞–ø–∫–∏ ca-server.
- –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–∫—Ä–∏–ø—Ç first-config.sh —Å –ø—Ä–∏–≤–∏–ª–µ–≥–∏—è–º–∏, –¥–ª—è –ø–µ—Ä–≤–∏—á–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.

  –í –ø—Ä–æ—Ü–µ—Å—Å–µ —Ä–∞–±–æ—Ç—ã —Å–∫—Ä–∏–ø—Ç–∞ –±—É–¥—É—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω—ã —Ç–∞–∫–∏–µ –¥–µ–π—Å—Ç–≤–∏—è –∫–∞–∫:
  - —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –ø–∞–∫–µ—Ç–æ–≤
  - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ ssh, –≤ —á–∞—Å—Ç–Ω–æ—Å—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–µ **—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ –Ω–æ–º–µ—Ä–∞ –ø–æ—Ä—Ç–∞ –Ω–∞ 2222**
  - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ iptables
 
**–î–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å 2 –≤–∞—Ä–∏–∞–Ω—Ç–∞:**

**1. –í–∞—Ä–∏–∞–Ω—Ç** –ó–∞–ø—É—Å—Ç–∏—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫—É –ø–∞–∫–µ—Ç–∞ easy-rsa-ca-server_0.1-1_all.deb –∫–æ—Ç–æ—Ä—ã–π —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–ª—è —Ä–∞–±–æ—Ç—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã.

**2. –í–∞—Ä–∏–∞–Ω—Ç** –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–∫—Ä–∏–ø—Ç, –∫–æ—Ç–æ—Ä—ã–π —É—Å—Ç–∞–Ω–æ–≤–∏—Ç easy-rsa –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫—É –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.
 
```bash

```
